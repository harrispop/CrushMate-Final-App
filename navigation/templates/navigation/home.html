<!-- 第一層：navigation/templates/home.html -->
{% extends 'base.html' %}
{% block title %}Home{% endblock %}
{% block content %}

<!-- Logo 區塊 -->
<div class="w-full text-center py-4 bg-gray-100">
  <h1 class="text-3xl font-extrabold text-pink-600">Crushmate</h1>
</div>

<!-- 主內容容器 -->
<div class="flex flex-col items-center justify-start min-h-screen bg-gray-100 pt-20 px-6">
  <!-- 照片輪播區塊 -->
  <div class="relative w-full max-w-3xl h-[50vh] overflow-hidden rounded-xl shadow-md">
    <div id="photo-carousel" class="h-full w-full flex transition-transform duration-500 ease-in-out">
      {% for photo in photos %}
        <img src="{{ photo.image.url }}" class="h-full w-full object-cover flex-shrink-0" alt="user photo">
      {% endfor %}
    </div>
    <!-- 左右切換按鈕 -->
    <button onclick="moveSlide(-1)" class="absolute left-2 top-1/2 -translate-y-1/2 bg-gray-800 text-white px-2 py-1 rounded">‹</button>
    <button onclick="moveSlide(1)" class="absolute right-2 top-1/2 -translate-y-1/2 bg-gray-800 text-white px-2 py-1 rounded">›</button>
  </div>

  <!-- 使用者資訊 -->
  <div class="flex items-center gap-4 mt-6">
    {% if main_photo %}
      <img src="{{ main_photo.image.url }}" class="rounded-full w-16 h-16 object-cover border-2 border-white shadow" alt="Main Avatar">
    {% endif %}
    <div class="text-left">
      <h2 class="text-xl font-bold">{{ user.username }}</h2>
      <p class="text-sm text-gray-500">Department</p>
    </div>
  </div>
</div>

<!-- 輪播腳本 -->
<script>
  let currentIndex = 0;

  function moveSlide(step) {
    const carousel = document.getElementById('photo-carousel');
    const photos = carousel.querySelectorAll('img');
    const total = photos.length;
    currentIndex = (currentIndex + step + total) % total;
    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
  }
</script>

{% endblock %}